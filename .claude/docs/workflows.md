# GSD 워크플로우 가이드

## 핵심 워크플로우

### 새 프로젝트 시작

```
/gsd:new-project
    ↓
[심층 질문] → [도메인 리서치] → [요구사항 정의] → [로드맵 생성]
    ↓
/clear
    ↓
/gsd:plan-phase 1
    ↓
[리서치] → [계획 생성] → [계획 검증]
    ↓
/clear
    ↓
/gsd:execute-phase 1
    ↓
[웨이브 실행] → [목표 검증] → [문서 업데이트]
    ↓
반복...
```

---

## 상세 워크플로우

### 1. 프로젝트 초기화

```
/gsd:new-project
```

**단계:**

1. **발견 단계**
   - Claude가 프로젝트에 대해 심층 질문
   - 비전, 대상 사용자, 핵심 기능 파악

2. **도메인 리서치** (선택)
   - 4개의 병렬 리서처 에이전트 실행
   - 표준 스택, 아키텍처, 함정 조사
   - SUMMARY.md로 종합

3. **요구사항 정의**
   - v1 범위 (MVP)
   - v2 범위 (향후)
   - 범위 외 (명시적 제외)
   - REQ-ID 부여

4. **로드맵 생성**
   - 요구사항을 페이즈로 분할
   - 성공 기준 도출
   - 의존성 정의

---

### 2. 페이즈 계획

```
/gsd:plan-phase <number>
```

**단계:**

1. **컨텍스트 로드**
   - STATE.md 읽기
   - ROADMAP.md에서 페이즈 목표 추출

2. **리서치** (선택)
   - 전문 도메인이면 gsd-phase-researcher 실행
   - RESEARCH.md 생성

3. **계획 생성**
   - gsd-planner 실행
   - 태스크 분할
   - 웨이브 할당
   - PLAN.md 생성

4. **계획 검증** (선택)
   - gsd-plan-checker 실행
   - 목표 달성 가능성 확인
   - 피드백 시 계획 수정

---

### 3. 페이즈 실행

```
/gsd:execute-phase <number>
```

**단계:**

1. **계획 발견**
   - 페이즈 디렉토리에서 PLAN.md 파일 찾기
   - 완료된 계획(SUMMARY.md 존재) 제외

2. **웨이브 그룹화**
   - 프론트매터의 `wave` 값으로 그룹화
   - 웨이브 순서 결정

3. **웨이브 실행**
   - 각 웨이브 순차 실행
   - 웨이브 내 계획은 병렬 실행
   - 체크포인트 처리

4. **목표 검증**
   - gsd-verifier 실행
   - 페이즈 목표 달성 확인
   - VERIFICATION.md 생성

5. **문서 업데이트**
   - ROADMAP.md 상태 업데이트
   - STATE.md 위치 업데이트

---

### 4. 갭 처리

검증에서 갭이 발견되면:

```
/gsd:plan-phase <number> --gaps
    ↓
[갭 클로저 계획 생성]
    ↓
/gsd:execute-phase <number> --gaps-only
    ↓
[재검증]
```

---

### 5. 마일스톤 완료

```
/gsd:complete-milestone <version>
```

**단계:**

1. **아카이브 생성**
   - MILESTONES.md에 항목 추가
   - milestones/ 디렉토리에 상세 저장

2. **Git 태그**
   - 버전 태그 생성

3. **정리**
   - 다음 마일스톤 준비

---

## 일반적인 시나리오

### 작업 재개

```
/gsd:progress  # 또는 /gsd:resume-work
```

현재 위치와 다음 행동을 확인하고 계속 진행합니다.

---

### 긴급 작업 삽입

```
/gsd:insert-phase 7 "긴급 보안 수정"
    ↓
/gsd:plan-phase 7.1
    ↓
/gsd:execute-phase 7.1
```

기존 순서를 유지하면서 긴급 작업을 처리합니다.

---

### 디버깅

```
/gsd:debug "버그 설명"
    ↓
[증상 수집] → [가설 설정] → [테스트] → [해결]
    ↓
# 컨텍스트 가득 차면
/clear
/gsd:debug  # 세션 재개
```

---

### 아이디어 캡처

작업 중 아이디어가 떠오르면:

```
/gsd:add-todo "API 응답 캐싱 추가"
```

나중에 검토:

```
/gsd:check-todos
```

---

### 브라운필드 프로젝트

기존 코드베이스에 GSD 적용:

```
/gsd:map-codebase     # 코드베이스 분석
    ↓
/gsd:new-project      # 새 마일스톤 계획
```

---

## 컨텍스트 관리

### `/clear` 사용 시점

- 페이즈 계획과 실행 사이
- 마일스톤 완료 후
- 디버그 세션 중 컨텍스트 가득 찼을 때

### 상태 유지

GSD는 `.planning/STATE.md`를 통해 세션 간 상태를 유지합니다:

- 현재 위치 (페이즈, 계획)
- 누적된 결정
- 열린 이슈

---

## 워크플로우 모드

### Interactive (기본값)

```json
{
  "mode": "interactive"
}
```

- 주요 결정마다 확인 요청
- 체크포인트에서 일시 정지
- 초보자에게 권장

### YOLO

```json
{
  "mode": "yolo"
}
```

- 대부분 자동 진행
- 중요 체크포인트에서만 정지
- 숙련자에게 권장

---

## 에이전트 토글

일부 에이전트는 건너뛸 수 있습니다:

```
/gsd:settings
```

**토글 가능:**
- 리서처: 도메인이 익숙하면 건너뛰기
- 플랜 체커: 단순한 페이즈면 건너뛰기
- 베리파이어: 빠른 반복 시 건너뛰기

---

## 베스트 프랙티스

1. **페이즈 사이에 `/clear`**
   - 컨텍스트 정리
   - 새로운 시작

2. **작은 페이즈 선호**
   - 검증 가능한 단위
   - 빠른 피드백

3. **STATE.md 신뢰**
   - 세션 간 연속성
   - 수동 편집 지양

4. **리서치 활용**
   - 전문 도메인에서 특히 유용
   - 실수 방지

5. **검증 건너뛰지 않기**
   - 목표 달성 확인
   - 갭 조기 발견
